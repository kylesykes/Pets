<!DOCTYPE html>

<html>
<head>
	<script src="pets.js"></script>
       <link rel="stylesheet" href="pets.css">

	<meta charset="utf-8">
	<title>New Pet</title>

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>

<div id="wrapper">
<div id="header">
<h1>Top Dog Information Systems</h1>
</div>
</div>


<div id="container-fluid">
<h3>Add New Pet</h3>
<div class="row">
  <div class="col-sm-4"></div>

	<div class="col-sm-4">
		<form method="POST" id="petData" >

		<table >
		<tbody >

		<tr>
		<td><label>Name</label></td>
		<td><input type="text" name="name"/></td>
		</tr>

		<tr>
		<td><label>Breed</label></td>
		<td><input type="text" name="breed"/></td>
		</tr>

		<tr>
		<td><label>Age</label></td>
		<td><input type="text" name="age"/></td>
		</tr>

		<tr>
		<td><label>Chipped</label></td>
		<td><input type="text" name="chip"/></td>
		</tr>

		<tr>
		<td><label>Rescued or Surrendered?</label></td>
		<td><input type="text" name="howCheckedIn"/></td>
		<tr>

		<tr>
		<td><label>Picture Upload</label></td>
		<td>
			<div class="">
		      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="">Choose File</button>
		    </div>
		    <p></p>
		</td>
		</tr>


		<tr>
		<td><label>Video Upload</label></td>
		<td>
			<div class="">
		      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="">Choose File</button>
		    </div>
		</td>
		<tr>

		<tr> 
		<td><input type="submit" value="Submit" class="save"/></td>
		</tr>

		</tbody>
		</table>

		</form>
	</div>
<div class="col-sm-43"></div>
</div>	

<div style="clear;both;"></div>

<p>
	<a href="home.html">Back to Home Page</a>
</p>
</div>
</body>
</html>

<script>
		var petData = document.getElementById('petData');
		petData.addEventListener('submit', function(ev) {
			ev.preventDefault();
			var petObj = {
				name: ev.srcElement[0].value,
				breed: ev.srcElement[1].value,
				age: ev.srcElement[2].value,
				chipped: ev.srcElement[3].value,
				howCheckedIn: ev.srcElement[4].value,
			};
			console.log(petObj);
			fetch('https://bwp-python-webapp.herokuapp.com/pet', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(petObj),
			})
			.then(function(response) {
				return response.json();
			})
			.then(function(json) {
				console.log(json)
				window.location = "ViewPet.html?"+"pet_id="+json.name+":"+json.pet_id;
			});
		});
	</script>
