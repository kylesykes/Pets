<!DOCTYPE html>

<html>
<head>
    <script src="pets.js"></script>
    <link rel="stylesheet" href="pets.css">

<<<<<<< HEAD
    <meta charset="utf-8">
    <title>View Owner</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
=======
<meta charset="utf-8">
<title>Update Owner</title>
<<<<<<< HEAD
>>>>>>> origin/master
=======
>>>>>>> origin/master
</head>

<body>

<<<<<<< HEAD
<<<<<<< HEAD
<div id="wrapper"
<div id="header"
=======
<div id="wrapper">
<div id="header">
>>>>>>> origin/master
=======
<div id="wrapper">
<div id="header">
>>>>>>> origin/master
<h1>Top Dog Information Systems</h1>
</div>
</div>


<div id="container">
<h3>Update Owner</h3>

<<<<<<< HEAD
<div class="row">
  <div class="col-sm-4"></div>

    <div class="col-sm-4">
<form action="https://bwp-python-webapp.herokuapp.com/owner" method="POST">
=======
<form id="ownerForm">
>>>>>>> origin/master

<table>
<tbody>

<tr>
<td><lable>Username</lable></td>
<td><input type="text" name="username"/>
</tr>

<tr>
<td><lable>Password</lable></td>
<td><input type="password" name="password"/>
</tr>

<tr>
<td><lable>First Name</lable></td>
<td><input type="text" name="firstName"/>
</tr>

<tr>
<td><lable>Last Name</lable></td>
<td><input type="text" name="lastName"/>
</tr>

<tr>
<td><lable>Phone Number</label></td>
<td><input type="text" name="phoneNumber"/>
<tr>

<tr>
<td><lable>Address</label></td>
<td><input type="text" name="address"/>
<tr>

<tr>
<td><lable>Email</label></td>
<td><input type="text" name="email"/>
<tr>

<tr> 
<td><input type="submit" value="Submit" class="save"/>
</tr>

</tbody>
</table>

</form>


<div style="clear;both;"></div>

<p>
	<a href="home.html">Back to Home Page</a>
</p>
</div>
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<div class="col-sm-43"></div>
</div>
=======
=======
=======
>>>>>>> origin/master

<button id="search" type="button">Link Pet</button>

<div id="searchResults" class="modal">
    <div class="modal-content animate">
        <div id="resultsHeader" class="container"></div>
        <div id="resultsField" class="container"></div>
        <div class="container">
            <button type="button" onclick="resultsModal.style.display='none'; resultsDiv.innerHTML=''" class="cancelbtn">Cancel</button>
        </div>
    </div>
</div>
<<<<<<< HEAD
>>>>>>> origin/master
=======
>>>>>>> origin/master

<div id="loadingIcon" class="modal">
    <div class="Aligner">
        <div class="Aligner-item">
            <div class="loader">Loading...</div>
        </div>
    </div>
</div>

<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> origin/master
=======
>>>>>>> origin/master
=======
>>>>>>> origin/master
</body>
</html>


<script>
    var ownerForm = document.getElementById('ownerForm');
    var loadingModal = document.getElementById('loadingIcon');
<<<<<<< HEAD
<<<<<<< HEAD
=======
=======
>>>>>>> origin/master
    var searchButton = document.getElementById("search");
    var resultsModal = document.getElementById('searchResults');
    var loadingModal = document.getElementById('loadingIcon');
    var resultsDiv = document.getElementById("resultsField");
    var resultsHeader = document.getElementById("resultsHeader");
<<<<<<< HEAD
>>>>>>> origin/master
=======
>>>>>>> origin/master

    loadingModal.style.display="block";

    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    fetch('https://bwp-python-webapp.herokuapp.com/owner?username='+getParameterByName('username'), {
        method: 'GET',
        headers: { 'Content-Type': 'application/json' },
    })
    .then(function(response) {
        return response.json();
    })
    .then(function(jsonObj) {
        ownerForm[0].value = jsonObj.username;
        ownerForm[1].value = jsonObj.password;
        ownerForm[2].value = jsonObj.firstName;
        ownerForm[3].value = jsonObj.lastName;
        ownerForm[4].value = jsonObj.phoneNumber;
        ownerForm[5].value = jsonObj.address;
        ownerForm[6].value = jsonObj.email;
        loadingModal.style.display="none";
<<<<<<< HEAD
<<<<<<< HEAD
=======
=======
>>>>>>> origin/master
    });

    searchButton.addEventListener("click", function() {
        var resultsName = "Pets:";
        var queryKey = "?name=";
        var pageName = "ViewPet.html";

        loadingModal.style.display="block";
        searchType = "pet";

        resultsHeader.innerHTML = "<h1>"+resultsName+"</h1>";
        
        fetch("https://bwp-python-webapp.herokuapp.com/"+searchType, {
                method:"GET",
            }).then(function(res){
                    res.json().then(function(json){
                        var contents = "";
                        json.forEach(function(element) {
                            var javaCommand = "";
                            contents += "<button onclick=\"" + javaCommand + "\">" + element + "</button>";
                        }, this);
                        console.log(contents);
                        resultsDiv.innerHTML = contents;
                        loadingModal.style.display="none";
                        resultsModal.style.display="block";
                    })
                })
<<<<<<< HEAD
>>>>>>> origin/master
=======
>>>>>>> origin/master
    });
</script>